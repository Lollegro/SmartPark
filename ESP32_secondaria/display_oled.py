from machine import Pin,I2C
import ssd1306, framebuf

class Oled:
    
    def __init__(self,oled_width,oled_height,scl_pin,sda_pin):
        self.width = oled_width
        self.height = oled_height
        self.i2c = I2C(0, scl=Pin(scl_pin), sda=Pin(sda_pin))
        self.oled = ssd1306.SSD1306_I2C(oled_width, oled_height, self.i2c)
     
    #funzione utilizzata per mostrare sul display un'immagine convertita in un array di byte 
    def show_logo(self):
        logo = bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfc\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x06\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x66\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\xfe\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\xfe\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x8c\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x84\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x80\x00\x00\x00\x01\xfe\x00\x00\x00\x00\x00\x00\x00\x00\x06\x03\x80\x01\x80\x00\x01\xfe\x00\x00\x00\x00\x00\x00\x00\x00\x07\x03\x80\x0f\xc0\x00\x01\x6e\x00\x00\x00\x00\x00\x00\x00\x00\x07\x00\x06\x1f\xc0\x00\x01\x02\x00\x00\x00\x00\x00\x00\x00\x00\x07\x02\x3f\x3f\xc0\x00\x00\x03\x00\x00\x00\x00\x00\x03\xc0\x00\x0f\x87\x3f\xbf\xd8\x00\x03\x67\x00\x00\x00\x00\x00\x0f\xe0\x00\x0f\xc7\x7f\xbf\xdc\x00\x03\xed\x00\x00\x00\x00\x00\x0f\xe0\x03\x8f\xe7\x7f\xff\xdc\x00\x05\xff\x80\x00\x00\x00\x00\x1f\xf0\x07\xcf\xf7\x7f\xff\xf8\x00\x07\xdf\x80\x00\x00\x00\x00\x1e\xf7\xcf\xee\xff\x7f\xff\xf8\x00\x07\x93\x80\x00\x00\x00\x00\x1e\xff\xef\xfe\xef\xff\xff\xf8\x00\x09\x19\xc0\x00\x00\x00\x00\x1e\x1f\xee\xfe\xef\xff\xff\xf0\x00\x08\x00\x40\x00\x00\x00\x00\x1c\x1e\xfe\x1f\xff\xf3\xfe\x00\x00\x08\xd8\xc0\x00\x00\x00\x00\x3c\x1f\xfe\x1f\xff\xf1\xc0\x00\x00\x0d\x31\xc0\x00\x00\x00\x00\x3c\x1f\xff\x3e\xff\xf0\x00\x00\x00\x0f\xfb\xc0\x00\x00\x00\x00\x3c\x1f\xff\xfc\x78\x00\x00\x00\x00\x1f\xf1\x40\x00\x00\x00\x00\x3c\x3f\xff\xfc\x00\x00\x00\x00\x00\x10\x00\x60\x00\x00\x00\x00\x3e\x7f\xe3\xe0\x00\x00\x00\x00\x00\x13\x0d\xe0\x00\x00\x00\x00\x1f\xff\xc0\x00\x00\x00\x00\x00\x00\x17\xff\x20\x00\x00\x00\x00\x0f\xf7\x00\x00\x00\x00\x00\x00\x00\x17\xff\xa0\x00\x00\x00\x00\x07\xc0\x00\x00\x00\x00\x00\x00\x00\x14\x8b\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xc0\x10\x01\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x70\x00\x00\x07\xe0\x10\x03\xe0\x00\x00\x00\x00\x00\x00\x00\x00\xf8\x00\x21\xe7\xe0\x19\xde\xe0\x00\x00\x00\x00\x00\x00\x00\x00\xf8\x00\x71\xff\xc8\x0f\xcc\xc0\x00\x00\x00\x00\x00\x00\x00\x01\xf8\x1c\x73\xff\xd8\x0f\x98\x40\x00\x00\x00\x00\x00\x00\xc0\x01\xfc\x3e\xf3\xff\xd8\x0f\x7f\x40\x00\x00\x00\x00\x00\x0c\xc0\x03\xfe\x7f\xfb\x8f\xf8\x0f\xb5\xc0\x00\x00\x00\x00\x00\x0f\xc0\x03\xff\x7f\xff\x9f\xf8\x0f\x3d\xc0\x00\x00\x00\x01\x80\x0f\xcf\x01\xdf\xff\xff\xff\xf0\x0e\x33\xc0\x00\x00\x00\x03\x80\x1d\xdf\x81\xdf\xff\xff\xff\x00\x0f\x3d\xc0\x00\x00\x00\x03\x81\x9d\xff\x83\x9f\xff\xfe\x40\x00\x08\x00\xc0\x00\x00\x00\x03\xc7\xdf\xff\x63\x87\xff\xf8\x00\x00\x08\x00\x80\x00\x00\x00\x03\xe7\xff\xff\x73\x83\xfe\x00\x00\x00\x08\x3e\x00\x00\x00\x00\x03\xff\xff\xbf\xe3\x81\x80\x00\x00\x00\x0f\x4c\x40\x00\x00\x00\x03\xff\xff\xff\xe3\x80\x00\x00\x00\x00\x0f\xfc\x40\x00\x00\x00\x03\xff\xff\xff\xc3\x80\x00\x00\x00\x00\x02\xac\x40\x00\x00\x00\x07\xff\xff\xfc\x07\x00\x00\x00\x00\x00\x10\x81\xe0\x00\x00\x00\x07\xff\xff\xc0\x07\x00\x00\x00\x00\x00\x11\xaf\xa0\x00\x00\x00\x07\xf7\xe0\x00\x07\x00\x00\x00\x00\x00\x13\xff\xe0\x00\x00\x00\x03\xe0\x00\x00\x07\x00\x00\x00\x00\x00\x13\xff\xe0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x0b\x37\xc0\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x07\x87\x80\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfc\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00')
        buffer = logo
        fb = framebuf.FrameBuffer(buffer, self.width, self.height, framebuf.MONO_HLSB)
        self.oled.fill(0)
        self.oled.blit(fb, 8, 0)
        self.oled.show()
        
    #funzione utilizzata per aggregare le funzioni fill, text e show del driver ssd1306
    def print_text(self,text,x,y):
        self.oled.fill(0)
        self.oled.text(text,x,y)
        self.oled.show()
        
    def print_emergency(self):
        self.oled.fill(0)
        self.oled.text("EMERGENZA!",3,10)
        self.oled.text("EVACUARE!",3,20)
        self.oled.show()
        